{%extends "home/base.html"%}
{%block content%}
<h1 class="bg-light text-dark">Title : {{post.title}}</h1>
<p class="card-text">Created By : {{post.creator.username}}</p>
<small class="text-muted">Last updated {{post.updatedTime|timesince}}
    ago</small>
<br>    
<small class="text-muted">Created On
    {{post.createdTime|date:"DATETIME_FORMAT"}}
    ago</small>
{%if user.is_authenticated and user == post.creator%}
<form method="POST" action="/deletep/{{post.url}}/">
    {% csrf_token %}
    <input type="hidden" value="{{post.url}}" name="post_url">
    <input type="hidden" value={{user}} name="user">
    <div class="form-group">
        <button type="submit" class="btn btn-danger">
            <i class="fas fa-trash-alt"></i>
        </button>
    </div>
</form>
{%endif%}
<br>
<h2>Content : </h2>
<h3>{{post.content}}</h3>
{%if post.comment_set.all%}
<h1>Comments:</h1>
{%for comment in post.comment_set.all%}
<h4>Posted By:{{comment.creator.username}}</h4>
<h3>{{comment.content}}</h3>
<br>
{%endfor%}
{%else%}
<h1>No comments yet</h1>
{%endif%}
{%if user.is_authenticated%}
<h3>Comment:</h3>
<form method="POST" action="/comment/">
    {% csrf_token %}
    <input type="hidden" value="{{post.url}}" name="post_url">
    <div class="form-group">
        <label for="content">Comment <span class="require">*</span></label>
        <textarea rows="5" class="form-control" name="content"></textarea>
    </div>
    <div class="form-group">
        <p><span class="require">*</span> - required fields</p>
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-primary">
            Comment
        </button>
    </div>
</form>
{%else%}
<h3>You need to be logged in to comment.</h3>
{%endif%}
{%endblock%}